<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="@|%l{q?~h.fGL)0bx#w3">clients</variable><variable id="vQ(Bml]668#~w_Rek7Ds">client</variable><variable id="JRM1Isht$}H(`f*20(]q">n</variable><variable id="X^ZvK9HSXk6F1wCs~PQr">client2</variable><variable id="BE}i82^v[Y(q(@b*MfCZ">serialNumber</variable><variable id="3^;P|d[4[hrBN[I#U%4|">client3</variable><variable id="I[Qa/^~UQ]C@C0`=y5uy">now</variable><variable id="6=0nQ6-7q2YeSgSK1Uys">client4</variable><variable id=";,4u`sIyLto@4HPoN*eX">lastPing</variable><variable id="HqDF4k;y(Bo^Oi6O=qYa">deadPing</variable><variable id="rU3fNTyTxL^$cV_!g_yh">lostPing</variable></variables><block type="pxt-on-start" id="*Vte;l@o@Am)bel?zH-h" x="0" y="0"><statement name="HANDLER"><block type="variables_set" id="-7!N|[q`/ley+KLQY7;t"><field name="VAR" id="HqDF4k;y(Bo^Oi6O=qYa">deadPing</field><comment pinned="false" h="80" w="160">Radio monitoring dashboard

Each radio client is represented by a dot on the screen.
Once a client is registered, it will stay at the same pixel location
forever.

Radio clients can simply send a number (between 0..255) on group 4.
They must transmit the serial number using ``radio.setTransmitSerialNumber(true)``

The received number is used to set the LED brightness for that client.

If the radio packet is not received for 10sec, the LED starts blinking.</comment><value name="VALUE"><shadow type="math_number" id="?~r~Bm:U{^s7{napddGo"><field name="NUM">20000</field></shadow></value><next><block type="variables_set" id="Kp-bcRoOJL-hN}BX*-u="><field name="VAR" id="rU3fNTyTxL^$cV_!g_yh">lostPing</field><value name="VALUE"><shadow type="math_number" id="U]X*W5;(RpaO3Q|E+R`."><field name="NUM">10000</field></shadow></value><next><block type="typescript_statement" id="^pWpo[@eJ3Q=o}hWXjYz" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="interface Client {" line1="    // client serial id" line2="    id: number;" line3="    // sprite on screen" line4="    sprite: game.LedSprite;" line5="    // last ping received" line6="    ping: number;" line7="}" numlines="8"></mutation><next><block type="radio_set_group" id="M?M5Lqg5AW[@[.`oMpJ@"><comment pinned="false" h="80" w="160">setup the radio and start!</comment><value name="ID"><shadow type="math_number_minmax" id="VP)7eC[CN9nM7-y.4xS="><mutation min="0" max="255" label="Number" precision="0"></mutation><field name="SLIDER">4</field></shadow></value><next><block type="game_add_score" id="*w3WbXqvQPAe(y=2GLSX"><value name="points"><shadow type="math_number" id="e8gcH*b+m;o~Ot9!7IH["><field name="NUM">1</field></shadow></value></block></next></block></next></block></next></block></next></block></statement></block><block type="argument_reporter_number" id="rw|JlCSW4hv|_Ur(OBR1" disabled="true" x="403" y="0"><field name="VALUE">id</field></block><block type="device_forever" id=")#wT9Rx@TttiYBQvA-?3" x="496" y="0"><comment pinned="false" h="80" w="160">monitor the sprites and start blinking when no packet is received</comment><statement name="HANDLER"><block type="variables_set" id="U3)(4[n:Cxsv$Q`WvdSN"><field name="VAR" id="I[Qa/^~UQ]C@C0`=y5uy">now</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_get_running_time" id="VSNB.(lEfgqlx:dLhTQn"></block></value><next><block type="pxt_controls_for_of" id="s@xLhwN}~*$I$texEZ]."><value name="VAR"><shadow type="variables_get_reporter" id="g-YMm/CJ6Q:LrlO#|LIC"><field name="VAR" id="6=0nQ6-7q2YeSgSK1Uys">client4</field></shadow></value><value name="LIST"><block type="variables_get" id="c5M3q-[9bsGF[g3D/S8P"><field name="VAR" id="@|%l{q?~h.fGL)0bx#w3">clients</field></block></value><statement name="DO"><block type="variables_set" id="hB;,iq?mbCxiY^v;MT9t"><field name="VAR" id=";,4u`sIyLto@4HPoN*eX">lastPing</field><comment pinned="false" h="80" w="160">lost signal starts blinking</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="*~YfDGwp{J}Vf44t2nEy"><field name="OP">MINUS</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="U?f{7C::eWWpkP3v/t4,"><field name="VAR" id="I[Qa/^~UQ]C@C0`=y5uy">now</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="typescript_expression" id="Z@IVkJU5DBo*Ddsw!0gW" editable="false"><field name="EXPRESSION">client4.ping</field></block></value></block></value><next><block type="controls_if" id="H:aZYKdy,I(J+LxB6kp."><mutation elseif="1" else="1"></mutation><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="oz]l28f;YzYi48`M4K~)"><field name="OP">GT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="q6O}!QZ/r{vk?XNiKJd{"><field name="VAR" id=";,4u`sIyLto@4HPoN*eX">lastPing</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="RT30|L[{YjC?`B_*$J?}"><field name="VAR" id="HqDF4k;y(Bo^Oi6O=qYa">deadPing</field></block></value></block></value><statement name="DO0"><block type="typescript_statement" id="0L7mXWFr,wo!JB0}uP~X" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="client4.sprite.setBlink(0)" numlines="1"></mutation><next><block type="typescript_statement" id="8uk~l]Ou[UN9Ob`U=|_i" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="client4.sprite.setBrightness(0)" numlines="1"></mutation></block></next></block></statement><value name="IF1"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="}Nt{6I_{k#hYtEV~!|n3"><field name="OP">GT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="[gzII|F)Q=|V;C-OH1ay"><field name="VAR" id=";,4u`sIyLto@4HPoN*eX">lastPing</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="$35db2{Gym(VDZOx7xcz"><field name="VAR" id="rU3fNTyTxL^$cV_!g_yh">lostPing</field></block></value></block></value><statement name="DO1"><block type="typescript_statement" id=",p+B0x2m[:Z;5gzgOV@v" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="client4.sprite.setBlink(500);" numlines="1"></mutation></block></statement><statement name="ELSE"><block type="typescript_statement" id="Scp,WI0$gWGckUgc5bA8" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="client4.sprite.setBlink(0);" numlines="1"></mutation></block></statement></block></next></block></statement><next><block type="device_pause" id="Xi1rDwcoD@9q0x2@O@f*"><value name="pause"><shadow type="timePicker" id="A;NfP.o:9zCvD@fRO;TI"><field name="ms">500</field></shadow></value></block></next></block></next></block></statement></block><block type="radio_on_number_drag" id="36Qs~pIpg?xUBNy0/$y0" x="1202" y="0"><comment pinned="false" h="80" w="160">store data received by clients</comment><value name="HANDLER_DRAG_PARAM_receivedNumber"><shadow type="argument_reporter_number" id="-X,smd!$Nwh4BSb=`GLR"><field name="VALUE">receivedNumber</field></shadow></value><statement name="HANDLER"><block type="variables_set" id=".bZ9`d^PRGA3UFFD1M}Q"><field name="VAR" id="BE}i82^v[Y(q(@b*MfCZ">serialNumber</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="radio_received_packet" id="?9aZ{Q3/K|?sZ#/1bnp}"><value name="type"><shadow type="radio_packet_property" id="+TPCQVsv|zb#8)NS?f2k"><field name="note">RadioPacketProperty.SerialNumber</field></shadow></value></block></value><next><block type="variables_set" id="+n8wbb:Ckf4:0O30I0VS"><field name="VAR" id="3^;P|d[4[hrBN[I#U%4|">client3</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output" id="i$Ab.5P]2P4$#AP*B{2E"><mutation name="getClient" functionid="1}vocGg9[MRpQ!OrarV("><arg name="id" id="ef5c604ioj1evylcyridt" type="number"></arg></mutation><value name="ef5c604ioj1evylcyridt"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="variables_get" id="}2syAct}=qAl;xrM9]7u"><field name="VAR" id="BE}i82^v[Y(q(@b*MfCZ">serialNumber</field></block></value></block></value><next><block type="controls_if" id="U;@SX-#2n!d#X[G)88*."><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id=".MW@Y1?pEPG1IiuzSEg."><value name="BOOL"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="}U`WLz}N}]g2a(_|vY]("><field name="VAR" id="3^;P|d[4[hrBN[I#U%4|">client3</field></block></value></block></value><statement name="DO0"><block type="typescript_statement" id="JbKXC;~yY5z[:AQ==wxy" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="return;" numlines="1"></mutation></block></statement><next><block type="typescript_statement" id=",g8L$nDgqu#Id0DB:65E" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="client3.ping = input.runningTime()" numlines="1"></mutation><next><block type="typescript_statement" id="$E;wk`y=t^gtTvXq:I5=" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="client3.sprite.setBrightness(Math.max(1, receivedNumber &amp; 0xff));" numlines="1"></mutation></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="7[gqD_!ul;~=e(odNDLq" x="1903" y="0"><mutation name="getClient" functionid="1}vocGg9[MRpQ!OrarV("><arg name="id" id="ef5c604ioj1evylcyridt" type="number"></arg></mutation><field name="function_name">getClient</field><comment pinned="false" h="80" w="160">lazy allocate sprite</comment><statement name="STACK"><block type="controls_if" id="^)qJYcU_H6?{k7)j$BlL"><comment pinned="false" h="80" w="160">needs an id to track radio client's identity</comment><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="N6ZT3~CB+(d)XE0h8$fA"><value name="BOOL"><shadow type="logic_boolean" id="$+e:/#=4.GDua{tb)n~1"><field name="BOOL">TRUE</field></shadow></value></block></value><statement name="DO0"><block type="function_return" id="mtuQ=L+E`#AbQi~=lTat"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="typescript_expression" id="jnA]cl)j-b}eJK?b*AMO" editable="false"><field name="EXPRESSION">undefined</field></block></value></block></statement><next><block type="pxt_controls_for_of" id="`imIu6h9C:)$ju3+_6c="><comment pinned="false" h="80" w="160">look for cached clients</comment><value name="VAR"><shadow type="variables_get_reporter" id="Ll#{JkRspPc(D+)0/}2y"><field name="VAR" id="vQ(Bml]668#~w_Rek7Ds">client</field></shadow></value><value name="LIST"><block type="variables_get" id="R!j9I(FUNy.OZLAz8W*I"><field name="VAR" id="@|%l{q?~h.fGL)0bx#w3">clients</field></block></value><statement name="DO"><block type="controls_if" id="-NG67Puc{SoI%8%iu6wB"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="^aTktA~#]4y!3jB:8`;!"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="typescript_expression" id="}xh#L:G,r*C+Gg!Z;sy)" editable="false"><field name="EXPRESSION">client.id</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="Ns9FPL_4Q3o-o36Iwox%"><field name="VALUE">id</field></block></value></block></value><statement name="DO0"><block type="function_return" id="VRz.-$r5e2(!%rKiADqO"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="oz|]i*g?l)I+z7}Il=nX"><field name="VAR" id="vQ(Bml]668#~w_Rek7Ds">client</field></block></value></block></statement></block></statement><next><block type="variables_set" id="VZ+j]x#;.[/+c1?a1$bT"><field name="VAR" id="JRM1Isht$}H(`f*20(]q">n</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_length" id="Oe?1[A/~-9ge575S{t=:"><value name="VALUE"><block type="variables_get" id="HD;DU)[nEAZ6Iyejt~N("><field name="VAR" id="@|%l{q?~h.fGL)0bx#w3">clients</field></block></value></block></value><next><block type="controls_if" id="W~*~PK]U!id@#/W0M_E^"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="@vX]$u9ITWqNGlYioBdY"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="s7Hm}zA0qxguamY^OS$d"><field name="VAR" id="JRM1Isht$}H(`f*20(]q">n</field></block></value><value name="B"><shadow type="math_number" id="E]KGaZIIPP=|sG:I7Ls}"><field name="NUM">24</field></shadow></value></block></value><statement name="DO0"><block type="function_return" id="AT!=X}!9d+]WZZ^OS6|z"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><comment pinned="false" h="80" w="160">out of pixels</comment><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="typescript_expression" id="R_zaYJb9n*zf;a3HG6,B" editable="false"><field name="EXPRESSION">undefined</field></block></value></block></statement><next><block type="typescript_statement" id="O#vURd^Gn1-9!^Y[O=BM" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="const client2: Client = {" line1="        id: id," line2="        sprite: game.createSprite(n % 5, n / 5)," line3="        ping: input.runningTime()" line4="    }" numlines="5" declaredvars="client2"></mutation><next><block type="array_push" id="Bcl}cbTPnTMIDOw9BFFp"><value name="list"><block type="variables_get" id="*Bi6D|++$tgk)K{j0f*+"><field name="VAR" id="@|%l{q?~h.fGL)0bx#w3">clients</field></block></value><value name="value"><block type="variables_get" id="JRe?`85Dgdr)hjw.oiXA"><field name="VAR" id="X^ZvK9HSXk6F1wCs~PQr">client2</field></block></value><next><block type="function_return" id="m9bl(03)YD:#Xn!%h^6D"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="bG6{h%K@FSNG~gz_D+Zk"><field name="VAR" id="X^ZvK9HSXk6F1wCs~PQr">client2</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>